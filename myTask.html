<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

    <script>

        // 할 일 관리 어플리케이션 step1 

        // 할일 목록
        const todoList = [];

        // todo라는 이름의 객체를 만든다. 여기에 속성과 값, 그리고 메소드를 정의한다. 
        const todo = {

            // 할 일 id
            todoId: 0,

            // 현재 상태
            status: {
                todo: 0,
                doing: 0,
                done: 0
            },

            // 현재 상태를 보여주는 메소드
            showStatus() {
                console.log(`현재상태 : todo:${this.status.todo}개, doing:${this.status.doing}개, done:${this.status.done}개`);
            },

            // 할 일 추가 메소드
            addTodo(todoInfo) {
                const info = todoInfo;
                this.todoId++;
                info.todoId = this.todoId;
                info.status = "todo";
                todoList.push(info);
                this.status.todo++;
                console.log(`id: ${info.todoId}, "${info.name}" 항목이 새로 추가되었습니다.`);
                this.showStatus();
            },

            // 할 일 업데이트 메소드
            updateTodo(updateInfo) {
                const info = updateInfo;
                info.nextStatus = info.nextStatus.toLowerCase();
                todoList.forEach(val => {
                    if (val.todoId === info.id) {
                        this.status[val.status]--;
                        this.status[info.nextStatus]++;
                        console.log(`id: ${val.todoId}, "${val.name}" 항목이 ${val.status} => ${info.nextStatus} 상태로 업데이트 됐습니다.`);
                        val.status = info.nextStatus;
                        this.showStatus();
                    }
                });
            },

            // 할 일 삭제 메소드
            removeTodo(removeInfo) {
                const info = removeInfo;
                todoList.forEach((val, idx) => {
                    if (val.todoId === info.id) {
                        this.status[val.status]--;
                        console.log(`${val.todoId}, "${val.name}" 삭제완료`);
                        todoList.splice(idx, 1);
                        this.showStatus();
                    }
                });
            }
        }

        // 메소드 호출 및 실행 
        todo.addTodo({ name: "자바스크립트 공부하기", tag: "programming" });
        todo.addTodo({ name: "알고리즘 문제풀기", tag: "programming" });
        todo.addTodo({ name: "사진 보정하기", tag: "hobby" });
        todo.updateTodo({ id: 1, nextStatus: "doNe" });
        todo.updateTodo({ id: 2, nextStatus: "Doing" });
        todo.removeTodo({ id: 3 });

    </script>

</body>

</html>